<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAR Concierge - Value Estimator</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .burger-card { transition: all 0.3s ease; border: 2px solid transparent; }
        .burger-card:hover { transform: translateY(-2px); }
        .burger-card.selected { border-color: #3b82f6; background-color: #eff6ff; }
        .toggle-checkbox:checked { right: 0; border-color: #68D391; }
        .toggle-checkbox:checked + .toggle-label { background-color: #68D391; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [rooms, setRooms] = useState(18);
            const [features, setFeatures] = useState({
                base: true,
                multilang: false,
                dashboard: false,
                managerTools: false,
                whatsapp: false
            });

            const [costs, setCosts] = useState({ monthly: 0, setup: 0 });

            // Pricing Constants
            const PRICES = {
                base: { setup: 4999, monthly: 999 },
                multilang: { setup: 2500, monthly: 500 },
                dashboard: { setup: 3500, monthly: 750 },
                managerTools: { setup: 5000, monthly: 1250 },
                whatsapp: { setup: 3500, monthly: 450 }
            };

            const calculateRoomCost = (numRooms) => {
                if (numRooms <= 18) return 0;
                let cost = 0;
                let count = numRooms - 18;

                // Tier 1: Rooms 19-50 (32 rooms max) @ R45
                const tier1Count = Math.min(count, 32);
                cost += tier1Count * 45;
                count -= tier1Count;

                if (count <= 0) return cost;

                // Tier 2: Rooms 51-100 (50 rooms max) @ R35
                const tier2Count = Math.min(count, 50);
                cost += tier2Count * 35;
                count -= tier2Count;

                if (count <= 0) return cost;

                // Tier 3: Rooms 101+ @ R25
                cost += count * 25;
                return cost;
            };

            useEffect(() => {
                let monthly = PRICES.base.monthly;
                let setup = PRICES.base.setup;

                if (features.multilang) { monthly += PRICES.multilang.monthly; setup += PRICES.multilang.setup; }
                if (features.dashboard) { monthly += PRICES.dashboard.monthly; setup += PRICES.dashboard.setup; }
                if (features.managerTools) { monthly += PRICES.managerTools.monthly; setup += PRICES.managerTools.setup; }
                if (features.whatsapp) { monthly += PRICES.whatsapp.monthly; setup += PRICES.whatsapp.setup; }

                // Add Room Scaling
                monthly += calculateRoomCost(rooms);

                setCosts({ monthly, setup });
            }, [rooms, features]);

            const toggleFeature = (key) => {
                setFeatures(prev => ({ ...prev, [key]: !prev[key] }));
            };

            const formatCurrency = (val) => {
                return new Intl.NumberFormat('en-ZA', { style: 'currency', currency: 'ZAR', maximumFractionDigits: 0 }).format(val);
            };

            return (
                <div className="min-h-screen p-4 md:p-8 max-w-7xl mx-auto">
                    {/* Header */}
                    <header className="mb-8 text-center md:text-left flex flex-col md:flex-row justify-between items-center">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-800">ZAR Digital Concierge</h1>
                            <p className="text-gray-500">Value Estimator & Configuration Tool</p>
                        </div>
                        <div className="mt-4 md:mt-0 bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold">
                            v17.0 Production Candidate
                        </div>
                    </header>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        
                        {/* LEFT COLUMN: Configuration */}
                        <div className="lg:col-span-2 space-y-6">
                            
                            {/* Room Slider Section */}
                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                <h2 className="text-xl font-semibold mb-4 flex items-center">
                                    <i className="fa-solid fa-hotel mr-2 text-blue-600"></i> Property Size
                                </h2>
                                <div className="mb-2 flex justify-between items-end">
                                    <label className="text-sm text-gray-600 font-medium">Number of Rooms</label>
                                    <span className="text-2xl font-bold text-blue-600">{rooms}</span>
                                </div>
                                <input 
                                    type="range" 
                                    min="1" 
                                    max="200" 
                                    value={rooms} 
                                    onChange={(e) => setRooms(parseInt(e.target.value))}
                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                />
                                <div className="mt-2 text-xs text-gray-500 flex justify-between">
                                    <span>1 Room</span>
                                    <span>First 18 Included in Base</span>
                                    <span>200+ Rooms</span>
                                </div>
                                <div className="mt-4 bg-blue-50 p-3 rounded-lg text-sm text-blue-800 border border-blue-100">
                                    <i className="fa-solid fa-info-circle mr-2"></i>
                                    {rooms <= 18 
                                        ? "Great! The base package includes coverage for up to 18 rooms." 
                                        : `Adding capacity for ${rooms - 18} extra rooms using our sliding scale efficiency model.`}
                                </div>
                            </div>

                            {/* Features "Burger" Builder */}
                            <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                                <h2 className="text-xl font-semibold mb-6 flex items-center">
                                    <i className="fa-solid fa-layer-group mr-2 text-indigo-600"></i> Build Your Solution
                                </h2>

                                {/* Base Layer (Locked) */}
                                <div className="flex items-center justify-between p-4 mb-4 border border-gray-200 rounded-lg bg-gray-50 opacity-75">
                                    <div className="flex items-start">
                                        <div className="bg-gray-200 p-2 rounded-md mr-4 text-gray-500">
                                            <i className="fa-solid fa-server fa-lg"></i>
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-gray-800">Core AI Engine (The Base)</h3>
                                            <p className="text-sm text-gray-500">English PWA, No-Login Access, Basic Local Info</p>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="font-bold text-gray-700">{formatCurrency(999)}/mo</div>
                                        <div className="text-xs text-gray-400">Included</div>
                                    </div>
                                </div>

                                {/* Feature Toggles */}
                                <div className="space-y-4">
                                    <FeatureToggle 
                                        active={features.multilang} 
                                        onClick={() => toggleFeature('multilang')}
                                        icon="fa-language"
                                        color="text-green-600"
                                        title="Multi-Language Pack"
                                        desc="18 Languages (Zulu, Xhosa, Mandarin...) + Real-time Context"
                                        price={PRICES.multilang.monthly}
                                        setup={PRICES.multilang.setup}
                                    />
                                    <FeatureToggle 
                                        active={features.dashboard} 
                                        onClick={() => toggleFeature('dashboard')}
                                        icon="fa-chart-line"
                                        color="text-purple-600"
                                        title="Manager Dashboard"
                                        desc="Live Ticketing, Dept. Routing, Housekeeping Views"
                                        price={PRICES.dashboard.monthly}
                                        setup={PRICES.dashboard.setup}
                                    />
                                    <FeatureToggle 
                                        active={features.managerTools} 
                                        onClick={() => toggleFeature('managerTools')}
                                        icon="fa-brain"
                                        color="text-pink-600"
                                        title="AI Manager Tools"
                                        desc="Auto-Response Drafting, Itinerary Planner, Analytics"
                                        price={PRICES.managerTools.monthly}
                                        setup={PRICES.managerTools.setup}
                                    />
                                    <FeatureToggle 
                                        active={features.whatsapp} 
                                        onClick={() => toggleFeature('whatsapp')}
                                        icon="fa-brands fa-whatsapp"
                                        color="text-green-500"
                                        title="WhatsApp API Integration"
                                        desc="Pre-arrival chat & direct messaging (Usage fees apply)"
                                        price={PRICES.whatsapp.monthly}
                                        setup={PRICES.whatsapp.setup}
                                    />
                                </div>
                            </div>
                        </div>

                        {/* RIGHT COLUMN: The Receipt */}
                        <div className="lg:col-span-1">
                            <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-200 sticky top-8">
                                <h2 className="text-xl font-bold mb-6 text-gray-800">Investment Summary</h2>
                                
                                {/* One-Time Costs */}
                                <div className="mb-6 pb-6 border-b border-gray-100">
                                    <h3 className="text-xs uppercase tracking-wide text-gray-500 font-semibold mb-3">One-Time Implementation</h3>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">Core System Setup</span>
                                            <span className="font-medium">{formatCurrency(PRICES.base.setup)}</span>
                                        </div>
                                        {features.multilang && <ItemRow label="Multi-Language Config" price={PRICES.multilang.setup} />}
                                        {features.dashboard && <ItemRow label="Dashboard Deployment" price={PRICES.dashboard.setup} />}
                                        {features.managerTools && <ItemRow label="AI Tools Training" price={PRICES.managerTools.setup} />}
                                        {features.whatsapp && <ItemRow label="WhatsApp API Setup" price={PRICES.whatsapp.setup} />}
                                        <div className="flex justify-between pt-2 mt-2 border-t border-dashed border-gray-200 font-bold text-gray-800">
                                            <span>Total Setup</span>
                                            <span>{formatCurrency(costs.setup)}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Monthly Costs */}
                                <div className="mb-8">
                                    <h3 className="text-xs uppercase tracking-wide text-gray-500 font-semibold mb-3">Monthly Subscription</h3>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between">
                                            <span className="text-gray-600">Base Subscription (18 Rooms)</span>
                                            <span className="font-medium">{formatCurrency(PRICES.base.monthly)}</span>
                                        </div>
                                        {rooms > 18 && (
                                            <div className="flex justify-between text-blue-600">
                                                <span>Room Scaling ({rooms - 18} addtl.)</span>
                                                <span className="font-medium">{formatCurrency(calculateRoomCost(rooms))}</span>
                                            </div>
                                        )}
                                        {features.multilang && <ItemRow label="Language Pack" price={PRICES.multilang.monthly} />}
                                        {features.dashboard && <ItemRow label="Manager Dashboard" price={PRICES.dashboard.monthly} />}
                                        {features.managerTools && <ItemRow label="AI Manager Tools" price={PRICES.managerTools.monthly} />}
                                        {features.whatsapp && <ItemRow label="WhatsApp Platform Fee" price={PRICES.whatsapp.monthly} />}
                                        
                                        <div className="flex justify-between pt-3 mt-3 border-t border-gray-200 text-lg font-bold text-blue-600">
                                            <span>Total Monthly</span>
                                            <span>{formatCurrency(costs.monthly)}</span>
                                        </div>
                                    </div>
                                    <p className="text-xs text-gray-400 mt-2">*Excludes VAT. WhatsApp usage billed separately.</p>
                                </div>

                                <button 
                                    className="w-full bg-gray-900 text-white font-bold py-3 rounded-lg hover:bg-gray-800 transition-colors shadow-lg"
                                    onClick={() => alert("Quote Generated! (This would print to PDF)")}
                                >
                                    Generate Formal Quote
                                </button>
                                <div className="mt-4 text-center">
                                    <p className="text-xs text-gray-500">
                                        <i className="fa-solid fa-lock mr-1"></i> 
                                        Price locked for 30 days
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const FeatureToggle = ({ active, onClick, icon, color, title, desc, price, setup }) => (
            <div 
                onClick={onClick}
                className={`flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all ${active ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'}`}
            >
                <div className="flex items-start">
                    <div className={`p-2 rounded-md mr-4 ${active ? 'bg-white' : 'bg-gray-100'} ${color}`}>
                        <i className={`fa-solid ${icon} fa-lg`}></i>
                    </div>
                    <div>
                        <h3 className={`font-bold ${active ? 'text-blue-900' : 'text-gray-800'}`}>{title}</h3>
                        <p className="text-xs text-gray-500 mt-1 max-w-[200px] md:max-w-xs">{desc}</p>
                    </div>
                </div>
                <div className="text-right ml-4">
                    <div className={`font-bold ${active ? 'text-blue-700' : 'text-gray-700'}`}>+R{price}<span className="text-xs font-normal">/mo</span></div>
                    <div className="text-xs text-gray-400">+R{setup} Setup</div>
                </div>
            </div>
        );

        const ItemRow = ({ label, price }) => (
            <div className="flex justify-between">
                <span className="text-gray-600">{label}</span>
                <span className="font-medium">R {price.toLocaleString()}</span>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

